| table_name               | constraint_name                                      | check_clause                                                                                                                   |
| ------------------------ | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| agents                   | agents_prompt_template_check                         | (length(TRIM(BOTH FROM prompt_template)) >= 20)                                                                                |
| agents                   | 2200_20787_1_not_null                                | id IS NOT NULL                                                                                                                 |
| agents                   | agents_name_check                                    | ((length(TRIM(BOTH FROM name)) >= 2) AND (length(TRIM(BOTH FROM name)) <= 100))                                                |
| agents                   | 2200_20787_7_not_null                                | is_active IS NOT NULL                                                                                                          |
| agents                   | 2200_20787_4_not_null                                | purpose IS NOT NULL                                                                                                            |
| agents                   | 2200_20787_8_not_null                                | created_at IS NOT NULL                                                                                                         |
| agents                   | 2200_20787_9_not_null                                | updated_at IS NOT NULL                                                                                                         |
| agents                   | 2200_20787_5_not_null                                | prompt_template IS NOT NULL                                                                                                    |
| agents                   | 2200_20787_3_not_null                                | name IS NOT NULL                                                                                                               |
| agents                   | 2200_20787_6_not_null                                | variables IS NOT NULL                                                                                                          |
| agents                   | agents_purpose_check                                 | ((length(TRIM(BOTH FROM purpose)) >= 10) AND (length(TRIM(BOTH FROM purpose)) <= 500))                                         |
| communities              | 2200_17293_2_not_null                                | name IS NOT NULL                                                                                                               |
| communities              | 2200_17293_14_not_null                               | organization_id IS NOT NULL                                                                                                    |
| communities              | communities_name_not_empty                           | (char_length((name)::text) > 0)                                                                                                |
| communities              | 2200_17293_1_not_null                                | id IS NOT NULL                                                                                                                 |
| document_chunks          | document_chunks_content_check                        | (length(content) > 0)                                                                                                          |
| document_chunks          | 2200_23324_3_not_null                                | document_id IS NOT NULL                                                                                                        |
| document_chunks          | 2200_23324_16_not_null                               | chunking_method IS NOT NULL                                                                                                    |
| document_chunks          | positive_content_length                              | (content_length = length(content))                                                                                             |
| document_chunks          | 2200_23324_6_not_null                                | chunk_type IS NOT NULL                                                                                                         |
| document_chunks          | 2200_23324_8_not_null                                | content_length IS NOT NULL                                                                                                     |
| document_chunks          | document_chunks_chunk_number_check                   | (chunk_number >= 1)                                                                                                            |
| document_chunks          | document_chunks_confidence_check                     | ((confidence >= (0.0)::double precision) AND (confidence <= (1.0)::double precision))                                          |
| document_chunks          | 2200_23324_5_not_null                                | chunk_number IS NOT NULL                                                                                                       |
| document_chunks          | 2200_23324_4_not_null                                | organization_id IS NOT NULL                                                                                                    |
| document_chunks          | document_chunks_chunking_method_check                | (chunking_method = ANY (ARRAY['semantic'::text, 'fixed-size'::text, 'paragraph'::text, 'section'::text]))                      |
| document_chunks          | document_chunks_chunk_type_check                     | (chunk_type = ANY (ARRAY['content'::text, 'header'::text, 'table'::text, 'list'::text, 'conclusion'::text, 'summary'::text]))  |
| document_chunks          | 2200_23324_7_not_null                                | content IS NOT NULL                                                                                                            |
| document_chunks          | document_chunks_processing_time_ms_check             | (processing_time_ms >= 0)                                                                                                      |
| document_chunks          | 2200_23324_1_not_null                                | id IS NOT NULL                                                                                                                 |
| document_chunks          | document_chunks_start_position_check                 | (start_position >= 0)                                                                                                          |
| document_chunks          | 2200_23324_2_not_null                                | created_at IS NOT NULL                                                                                                         |
| document_chunks          | document_chunks_check                                | (end_position >= start_position)                                                                                               |
| document_chunks          | document_chunks_quality_score_check                  | ((quality_score >= (0.0)::double precision) AND (quality_score <= (1.0)::double precision))                                    |
| document_classifications | 2200_23251_5_not_null                                | document_type IS NOT NULL                                                                                                      |
| document_classifications | document_classifications_processing_time_ms_check    | (processing_time_ms >= 0)                                                                                                      |
| document_classifications | 2200_23251_2_not_null                                | created_at IS NOT NULL                                                                                                         |
| document_classifications | document_classifications_confidence_check            | ((confidence >= (0.0)::double precision) AND (confidence <= (1.0)::double precision))                                          |
| document_classifications | 2200_23251_7_not_null                                | classification_method IS NOT NULL                                                                                              |
| document_classifications | 2200_23251_4_not_null                                | organization_id IS NOT NULL                                                                                                    |
| document_classifications | document_classifications_classification_method_check | (classification_method = ANY (ARRAY['gemini'::text, 'filename-fallback'::text, 'manual'::text, 'legacy-migration'::text]))     |
| document_classifications | 2200_23251_6_not_null                                | confidence IS NOT NULL                                                                                                         |
| document_classifications | 2200_23251_1_not_null                                | id IS NOT NULL                                                                                                                 |
| document_classifications | 2200_23251_3_not_null                                | document_id IS NOT NULL                                                                                                        |
| document_classifications | document_classifications_document_type_check         | (document_type = ANY (ARRAY['acta'::text, 'contrato'::text, 'factura'::text, 'comunicado'::text, 'otros'::text]))              |
| document_metadata        | 2200_23286_7_not_null                                | confidence IS NOT NULL                                                                                                         |
| document_metadata        | 2200_23286_2_not_null                                | created_at IS NOT NULL                                                                                                         |
| document_metadata        | document_metadata_validation_status_check            | (validation_status = ANY (ARRAY['valid'::text, 'warnings'::text, 'invalid'::text]))                                            |
| document_metadata        | 2200_23286_4_not_null                                | organization_id IS NOT NULL                                                                                                    |
| document_metadata        | 2200_23286_1_not_null                                | id IS NOT NULL                                                                                                                 |
| document_metadata        | 2200_23286_5_not_null                                | metadata IS NOT NULL                                                                                                           |
| document_metadata        | document_metadata_extraction_method_check            | (extraction_method = ANY (ARRAY['gemini'::text, 'fallback'::text, 'manual'::text]))                                            |
| document_metadata        | 2200_23286_8_not_null                                | extraction_method IS NOT NULL                                                                                                  |
| document_metadata        | 2200_23286_3_not_null                                | document_id IS NOT NULL                                                                                                        |
| document_metadata        | document_metadata_processing_time_ms_check           | (processing_time_ms >= 0)                                                                                                      |
| document_metadata        | document_metadata_confidence_check                   | ((confidence >= (0.0)::double precision) AND (confidence <= (1.0)::double precision))                                          |
| documents                | 2200_20753_6_not_null                                | file_size IS NOT NULL                                                                                                          |
| documents                | documents_processing_level_check                     | (processing_level = ANY (ARRAY[1, 2, 3, 4]))                                                                                   |
| documents                | 2200_20753_2_not_null                                | organization_id IS NOT NULL                                                                                                    |
| documents                | 2200_20753_7_not_null                                | file_hash IS NOT NULL                                                                                                          |
| documents                | documents_file_path_check                            | (length(TRIM(BOTH FROM file_path)) >= 1)                                                                                       |
| documents                | documents_filename_check                             | ((length(TRIM(BOTH FROM filename)) >= 1) AND (length(TRIM(BOTH FROM filename)) <= 255))                                        |
| documents                | documents_file_hash_check                            | (length(TRIM(BOTH FROM file_hash)) >= 32)                                                                                      |
| documents                | documents_extraction_status_check                    | (extraction_status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'failed'::text]))                      |
| documents                | 2200_20753_4_not_null                                | filename IS NOT NULL                                                                                                           |
| documents                | 2200_20753_5_not_null                                | file_path IS NOT NULL                                                                                                          |
| documents                | 2200_20753_10_not_null                               | created_at IS NOT NULL                                                                                                         |
| documents                | documents_document_type_check                        | (document_type = ANY (ARRAY['acta'::text, 'factura'::text, 'comunicado'::text, 'contrato'::text, 'presupuesto'::text]))        |
| documents                | documents_status_check                               | (legacy_status = ANY (ARRAY['processing'::text, 'completed'::text, 'error'::text]))                                            |
| documents                | documents_extraction_method_check                    | (extraction_method = ANY (ARRAY['pdf-parse'::text, 'ocr'::text, 'llm'::text]))                                                 |
| documents                | documents_metadata_status_check                      | (metadata_status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'skipped'::text]))       |
| documents                | documents_file_size_check                            | (file_size > 0)                                                                                                                |
| documents                | 2200_20753_1_not_null                                | id IS NOT NULL                                                                                                                 |
| documents                | documents_classification_status_check                | (classification_status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'skipped'::text])) |
| documents                | 2200_20753_9_not_null                                | legacy_status IS NOT NULL                                                                                                      |
| documents                | documents_chunking_status_check                      | (chunking_status = ANY (ARRAY['pending'::text, 'processing'::text, 'completed'::text, 'failed'::text, 'skipped'::text]))       |
| extracted_budgets        | 2200_29572_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_budgets        | 2200_29572_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_budgets        | 2200_29572_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_budgets        | 2200_29572_34_not_null                               | created_at IS NOT NULL                                                                                                         |
| extracted_communications | 2200_29428_21_not_null                               | created_at IS NOT NULL                                                                                                         |
| extracted_communications | extracted_communications_urgencia_check              | (urgencia = ANY (ARRAY['baja'::text, 'media'::text, 'alta'::text, 'urgente'::text]))                                           |
| extracted_communications | 2200_29428_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_communications | 2200_29428_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_communications | 2200_29428_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_contracts      | 2200_29522_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_contracts      | 2200_29522_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_contracts      | 2200_29522_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_contracts      | 2200_29522_35_not_null                               | created_at IS NOT NULL                                                                                                         |
| extracted_delivery_notes | 2200_29478_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_delivery_notes | 2200_29478_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_delivery_notes | 2200_29478_23_not_null                               | created_at IS NOT NULL                                                                                                         |
| extracted_delivery_notes | 2200_29478_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_invoices       | 2200_20839_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_invoices       | extracted_invoices_client_name_check                 | ((client_name IS NULL) OR (length(TRIM(BOTH FROM client_name)) <= 255))                                                        |
| extracted_invoices       | extracted_invoices_provider_name_check               | ((provider_name IS NULL) OR (length(TRIM(BOTH FROM provider_name)) <= 255))                                                    |
| extracted_invoices       | 2200_20839_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_invoices       | 2200_20839_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_invoices       | extracted_invoices_category_check                    | ((category IS NULL) OR (length(TRIM(BOTH FROM category)) <= 100))                                                              |
| extracted_invoices       | extracted_invoices_amount_check                      | ((amount IS NULL) OR (amount >= (0)::numeric))                                                                                 |
| extracted_invoices       | 2200_20839_9_not_null                                | created_at IS NOT NULL                                                                                                         |
| extracted_minutes        | 2200_20812_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_minutes        | 2200_20812_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| extracted_minutes        | extracted_minutes_president_in_check                 | ((president_in IS NULL) OR (length(TRIM(BOTH FROM president_in)) <= 255))                                                      |
| extracted_minutes        | extracted_minutes_decisions_check                    | ((decisions IS NULL) OR (length(TRIM(BOTH FROM decisions)) <= 2000))                                                           |
| extracted_minutes        | extracted_minutes_administrator_check                | ((administrator IS NULL) OR (length(TRIM(BOTH FROM administrator)) <= 255))                                                    |
| extracted_minutes        | extracted_minutes_president_out_check                | ((president_out IS NULL) OR (length(TRIM(BOTH FROM president_out)) <= 255))                                                    |
| extracted_minutes        | extracted_minutes_summary_check                      | ((summary IS NULL) OR (length(TRIM(BOTH FROM summary)) <= 2000))                                                               |
| extracted_minutes        | 2200_20812_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_minutes        | extracted_minutes_tipo_reunion_check                 | (tipo_reunion = ANY (ARRAY['ordinaria'::text, 'extraordinaria'::text]))                                                        |
| extracted_minutes        | 2200_20812_9_not_null                                | created_at IS NOT NULL                                                                                                         |
| extracted_property_deeds | 2200_29622_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| extracted_property_deeds | 2200_29622_62_not_null                               | created_at IS NOT NULL                                                                                                         |
| extracted_property_deeds | 2200_29622_1_not_null                                | id IS NOT NULL                                                                                                                 |
| extracted_property_deeds | 2200_29622_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| incidents                | 2200_17519_3_not_null                                | description IS NOT NULL                                                                                                        |
| incidents                | incidents_status_check                               | (status = ANY (ARRAY['abierto'::text, 'en_progreso'::text, 'cerrado'::text]))                                                  |
| incidents                | 2200_17519_1_not_null                                | id IS NOT NULL                                                                                                                 |
| incidents                | incidents_priority_check                             | (priority = ANY (ARRAY['baja'::text, 'media'::text, 'alta'::text, 'urgente'::text]))                                           |
| incidents                | 2200_17519_5_not_null                                | priority IS NOT NULL                                                                                                           |
| incidents                | 2200_17519_6_not_null                                | community_id IS NOT NULL                                                                                                       |
| incidents                | 2200_17519_4_not_null                                | status IS NOT NULL                                                                                                             |
| incidents                | incidents_description_check                          | (length(description) > 0)                                                                                                      |
| incidents                | incidents_title_check                                | (length(title) > 0)                                                                                                            |
| incidents                | 2200_17519_2_not_null                                | title IS NOT NULL                                                                                                              |
| incidents                | 2200_17519_12_not_null                               | organization_id IS NOT NULL                                                                                                    |
| incidents                | 2200_17519_7_not_null                                | reported_by IS NOT NULL                                                                                                        |
| items                    | 2200_17332_2_not_null                                | id IS NOT NULL                                                                                                                 |
| items                    | 2200_17332_1_not_null                                | created_at IS NOT NULL                                                                                                         |
| items                    | 2200_17332_4_not_null                                | description IS NOT NULL                                                                                                        |
| items                    | 2200_17332_3_not_null                                | name IS NOT NULL                                                                                                               |
| organizations            | 2200_17926_13_not_null                               | created_at IS NOT NULL                                                                                                         |
| organizations            | organizations_contact_email_check                    | (contact_email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'::text)                                                    |
| organizations            | 2200_17926_4_not_null                                | owner_id IS NOT NULL                                                                                                           |
| organizations            | organizations_max_users_per_community_check          | ((max_users_per_community > 0) AND (max_users_per_community <= 10000))                                                         |
| organizations            | organizations_name_check                             | ((length(TRIM(BOTH FROM name)) >= 2) AND (length(TRIM(BOTH FROM name)) <= 255))                                                |
| organizations            | 2200_17926_8_not_null                                | max_communities IS NOT NULL                                                                                                    |
| organizations            | 2200_17926_9_not_null                                | max_users_per_community IS NOT NULL                                                                                            |
| organizations            | 2200_17926_7_not_null                                | subscription_plan IS NOT NULL                                                                                                  |
| organizations            | organizations_description_check                      | ((description IS NULL) OR (length(TRIM(BOTH FROM description)) <= 1000))                                                       |
| organizations            | 2200_17926_10_not_null                               | is_active IS NOT NULL                                                                                                          |
| organizations            | organizations_subscription_plan_check                | (subscription_plan = ANY (ARRAY['basic'::text, 'premium'::text, 'enterprise'::text]))                                          |
| organizations            | 2200_17926_14_not_null                               | updated_at IS NOT NULL                                                                                                         |
| organizations            | 2200_17926_1_not_null                                | id IS NOT NULL                                                                                                                 |
| organizations            | 2200_17926_2_not_null                                | name IS NOT NULL                                                                                                               |
| organizations            | organizations_max_communities_check                  | ((max_communities > 0) AND (max_communities <= 1000))                                                                          |
| organizations            | organizations_contact_phone_check                    | ((contact_phone IS NULL) OR (length(TRIM(BOTH FROM contact_phone)) >= 10))                                                     |
| private_items            | 2200_17341_1_not_null                                | created_at IS NOT NULL                                                                                                         |
| private_items            | 2200_17341_2_not_null                                | id IS NOT NULL                                                                                                                 |
| private_items            | 2200_17341_3_not_null                                | name IS NOT NULL                                                                                                               |
| private_items            | 2200_17341_5_not_null                                | user_id IS NOT NULL                                                                                                            |
| private_items            | 2200_17341_4_not_null                                | description IS NOT NULL                                                                                                        |
| user_roles               | 2200_17386_2_not_null                                | user_id IS NOT NULL                                                                                                            |
| user_roles               | 2200_17386_4_not_null                                | role IS NOT NULL                                                                                                               |
| user_roles               | user_roles_role_check                                | (role = ANY (ARRAY['admin'::text, 'manager'::text, 'resident'::text]))                                                         |
| user_roles               | 2200_17386_7_not_null                                | organization_id IS NOT NULL                                                                                                    |
| user_roles               | 2200_17386_1_not_null                                | id IS NOT NULL                                                                                                                 |
| vector_embeddings        | vector_embeddings_chunk_size_check                   | ((chunk_size IS NULL) OR (chunk_size > 0))                                                                                     |
| vector_embeddings        | 2200_20867_2_not_null                                | document_id IS NOT NULL                                                                                                        |
| vector_embeddings        | 2200_20867_1_not_null                                | id IS NOT NULL                                                                                                                 |
| vector_embeddings        | vector_embeddings_chunk_index_check                  | (chunk_index >= 0)                                                                                                             |
| vector_embeddings        | 2200_20867_3_not_null                                | organization_id IS NOT NULL                                                                                                    |
| vector_embeddings        | 2200_20867_4_not_null                                | content IS NOT NULL                                                                                                            |
| vector_embeddings        | vector_embeddings_content_check                      | (length(TRIM(BOTH FROM content)) >= 10)                                                                                        |
| vector_embeddings        | 2200_20867_8_not_null                                | created_at IS NOT NULL                                                                                                         |