| schemaname | tablename                | policyname                                       | permissive | roles    | cmd    | qual                                                                                                                                                                                                                                                                                                                                                        | with_check                                                                                                                                                                                                                                                                                                                       |
| ---------- | ------------------------ | ------------------------------------------------ | ---------- | -------- | ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| public     | agents                   | agents_global_and_organization_access            | PERMISSIVE | {public} | SELECT | ((organization_id IS NULL) OR (organization_id = get_user_organization_id()))                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                             |
| public     | agents                   | agents_organization_delete                       | PERMISSIVE | {public} | DELETE | ((organization_id = get_user_organization_id()) AND (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = get_user_organization_id()) AND (o.owner_id = auth.uid())))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                             |
| public     | agents                   | agents_organization_insert                       | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | ((organization_id = get_user_organization_id()) AND (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = get_user_organization_id()) AND (o.owner_id = auth.uid())))))                                                                                                                                                    |
| public     | agents                   | agents_organization_update                       | PERMISSIVE | {public} | UPDATE | ((organization_id = get_user_organization_id()) AND (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = get_user_organization_id()) AND (o.owner_id = auth.uid())))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | Admins and owners can update communities         | PERMISSIVE | {public} | UPDATE | ((EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id IS NULL) AND (ur.role = 'admin'::text)))) OR (user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id = communities.id) AND (ur.role = ANY (ARRAY['admin'::text, 'manager'::text])))))) | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | Admins can delete communities                    | PERMISSIVE | {public} | DELETE | (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id IS NULL) AND (ur.role = 'admin'::text))))                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | Admins can insert communities                    | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | ((EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id IS NULL) AND (ur.role = 'admin'::text)))) OR (user_id = auth.uid()))                                                                                                                                                           |
| public     | communities              | Users can view communities where they have roles | PERMISSIVE | {public} | SELECT | ((EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id IS NULL) AND (ur.role = 'admin'::text)))) OR (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.community_id = communities.id)))) OR (user_id = auth.uid()))                                                             | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | Users can view their accessible communities      | PERMISSIVE | {public} | SELECT | (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND ((ur.community_id = communities.id) OR ((ur.community_id IS NULL) AND (ur.role = 'admin'::text))))))                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | communities_delete_org_based                     | PERMISSIVE | {public} | DELETE | (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = communities.organization_id) AND (o.owner_id = auth.uid()))))                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | communities_insert_org_based                     | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | ((EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = communities.organization_id) AND (o.owner_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.organization_id = communities.organization_id) AND (ur.role = ANY (ARRAY['admin'::text, 'manager'::text])))))) |
| public     | communities              | communities_select_org_based                     | PERMISSIVE | {public} | SELECT | ((EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = communities.organization_id) AND (o.owner_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.organization_id = communities.organization_id)))))                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | communities              | communities_update_org_based                     | PERMISSIVE | {public} | UPDATE | ((EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = communities.organization_id) AND (o.owner_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.organization_id = communities.organization_id) AND (ur.role = ANY (ARRAY['admin'::text, 'manager'::text]))))))                            | null                                                                                                                                                                                                                                                                                                                             |
| public     | document_chunks          | document_chunks_organization_isolation           | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | document_classifications | document_classifications_organization_isolation  | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | document_metadata        | document_metadata_organization_isolation         | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | documents                | documents_organization_isolation                 | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | extracted_invoices       | extracted_invoices_organization_isolation        | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | extracted_minutes        | extracted_minutes_organization_isolation         | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |
| public     | incidents                | incidents_all_operations                         | PERMISSIVE | {public} | ALL    | ((organization_id IN ( SELECT user_roles.organization_id
   FROM user_roles
  WHERE (user_roles.user_id = auth.uid()))) OR (reported_by = auth.uid()))                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | incidents                | incidents_delete_simple                          | PERMISSIVE | {public} | DELETE | (organization_id IN ( SELECT user_roles.organization_id
   FROM user_roles
  WHERE (user_roles.user_id = auth.uid())))                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | incidents                | incidents_insert_simple                          | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | (organization_id IN ( SELECT user_roles.organization_id
   FROM user_roles
  WHERE (user_roles.user_id = auth.uid())))                                                                                                                                                                                                           |
| public     | incidents                | incidents_select_simple                          | PERMISSIVE | {public} | SELECT | (organization_id IN ( SELECT user_roles.organization_id
   FROM user_roles
  WHERE (user_roles.user_id = auth.uid())))                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | incidents                | incidents_update_simple                          | PERMISSIVE | {public} | UPDATE | ((organization_id IN ( SELECT user_roles.organization_id
   FROM user_roles
  WHERE (user_roles.user_id = auth.uid()))) OR (reported_by = auth.uid()))                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | items                    | Items are viewable by everyone                   | PERMISSIVE | {public} | SELECT | true                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | items                    | Users can delete their own items                 | PERMISSIVE | {public} | DELETE | true                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | items                    | Users can insert their own items                 | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | true                                                                                                                                                                                                                                                                                                                             |
| public     | items                    | Users can update their own items                 | PERMISSIVE | {public} | UPDATE | true                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | organizations            | organizations_delete_simple                      | PERMISSIVE | {public} | DELETE | (owner_id = auth.uid())                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                             |
| public     | organizations            | organizations_insert_simple                      | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | (owner_id = auth.uid())                                                                                                                                                                                                                                                                                                          |
| public     | organizations            | organizations_select_simple                      | PERMISSIVE | {public} | SELECT | (owner_id = auth.uid())                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                             |
| public     | organizations            | organizations_update_simple                      | PERMISSIVE | {public} | UPDATE | (owner_id = auth.uid())                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                             |
| public     | private_items            | Users can delete their own private_items         | PERMISSIVE | {public} | DELETE | (auth.uid() = user_id)                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | private_items            | Users can insert their own private_items         | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | (auth.uid() = user_id)                                                                                                                                                                                                                                                                                                           |
| public     | private_items            | Users can update their own private_items         | PERMISSIVE | {public} | UPDATE | (auth.uid() = user_id)                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | private_items            | Users can view their own private_items           | PERMISSIVE | {public} | SELECT | (auth.uid() = user_id)                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | Global admins can manage all roles               | PERMISSIVE | {public} | ALL    | (((user_id = auth.uid()) AND (role = 'admin'::text) AND (community_id IS NULL)) OR (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid())))))                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | Organization owners can manage all roles         | PERMISSIVE | {public} | ALL    | (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid()))))                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | Users can view their own roles                   | PERMISSIVE | {public} | SELECT | (user_id = auth.uid())                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | user_roles_delete_simple                         | PERMISSIVE | {public} | DELETE | (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid()))))                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | user_roles_insert_simple                         | PERMISSIVE | {public} | INSERT | null                                                                                                                                                                                                                                                                                                                                                        | (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid()))))                                                                                                                                                                                                         |
| public     | user_roles               | user_roles_select_simple                         | PERMISSIVE | {public} | SELECT | ((user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid())))))                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | user_roles               | user_roles_update_simple                         | PERMISSIVE | {public} | UPDATE | ((user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM organizations o
  WHERE ((o.id = user_roles.organization_id) AND (o.owner_id = auth.uid())))))                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                             |
| public     | vector_embeddings        | vector_embeddings_organization_isolation         | PERMISSIVE | {public} | ALL    | (organization_id = get_user_organization_id())                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                             |