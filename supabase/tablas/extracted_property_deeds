create table public.extracted_property_deeds (
  id uuid not null default gen_random_uuid (),
  document_id uuid not null,
  organization_id uuid not null,
  vendedor_nombre text null,
  comprador_nombre text null,
  direccion_inmueble text null,
  precio_venta numeric(12, 2) null,
  fecha_escritura date null,
  notario_nombre text null,
  referencia_catastral text null,
  superficie_m2 numeric(10, 2) null,
  category text null,
  vendedor_dni text null,
  vendedor_direccion text null,
  vendedor_estado_civil text null,
  vendedor_nacionalidad text null,
  vendedor_profesion text null,
  comprador_dni text null,
  comprador_direccion text null,
  comprador_estado_civil text null,
  comprador_nacionalidad text null,
  comprador_profesion text null,
  tipo_inmueble text null,
  superficie_util numeric(10, 2) null,
  numero_habitaciones integer null,
  numero_banos integer null,
  planta text null,
  orientacion text null,
  descripcion_inmueble text null,
  registro_propiedad text null,
  tomo text null,
  libro text null,
  folio text null,
  finca text null,
  inscripcion text null,
  moneda text null default 'EUR'::text,
  forma_pago text null,
  precio_en_letras text null,
  impuestos_incluidos boolean null default false,
  gastos_a_cargo_comprador jsonb null default '[]'::jsonb,
  gastos_a_cargo_vendedor jsonb null default '[]'::jsonb,
  cargas_existentes jsonb null default '[]'::jsonb,
  hipotecas_pendientes text null,
  servidumbres text null,
  libre_cargas boolean null default true,
  condicion_suspensiva boolean null default false,
  condiciones_especiales jsonb null default '[]'::jsonb,
  clausulas_particulares jsonb null default '[]'::jsonb,
  fecha_entrega date null,
  entrega_inmediata boolean null default false,
  estado_conservacion text null,
  inventario_incluido text null,
  notario_numero_colegiado text null,
  notaria_direccion text null,
  protocolo_numero text null,
  autorizacion_notarial boolean null default false,
  valor_catastral numeric(12, 2) null,
  coeficiente_participacion text null,
  itp_aplicable numeric(5, 2) null,
  base_imponible_itp numeric(12, 2) null,
  inscripcion_registro text null,
  created_at timestamp with time zone not null default now(),
  constraint extracted_property_deeds_pkey primary key (id),
  constraint extracted_property_deeds_document_id_fkey foreign KEY (document_id) references documents (id) on delete CASCADE,
  constraint extracted_property_deeds_organization_id_fkey foreign KEY (organization_id) references organizations (id) on delete CASCADE
) TABLESPACE pg_default;

create index IF not exists idx_extracted_property_deeds_document_id on public.extracted_property_deeds using btree (document_id) TABLESPACE pg_default;

create index IF not exists idx_extracted_property_deeds_organization_id on public.extracted_property_deeds using btree (organization_id) TABLESPACE pg_default;

create index IF not exists idx_extracted_property_deeds_fecha_escritura on public.extracted_property_deeds using btree (fecha_escritura) TABLESPACE pg_default;